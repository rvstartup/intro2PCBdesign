# Week 1/2 - PCB Structure and Design Workflow

In this segment we will cover
* the physical structure of printed circuit boards (PCBs) and how they are made, and
* the design workflow that results in the generation of the files needed for PCB fabrication

## PCB Structure
Currently there are three major classes of PCB structure:
* Rigid PCBs,
* Flex PCBs, and
* Metal substrate PCBs

Let's talk about each type in turn...


* __Rigid PCBs__ - These are the traditional multilayer PCBs made by laminating alternating layers of copper and a substrate material.

The substrate is most commonly an epoxy / glass fiber composite called FR4, however there are many different materials that may be used. You may have heard of some of these, such as FR408, Rogers Duroid, etc. Materials are selected based on the trade-off between cost and performance. "Performance" is judged by evaluating the different electrical properties, flame resistance, and so forth.

The number of layers ranges from just one (a single-sided board) to over thirty (30) layers in the case of backplanes, etc. The finished thickness of rigid boards ranges typically from ~ 0.2mm (0.008") to over 9.5 mm (0.375"). Again, thicker boards are usually for backplanes where dense connectivity is required. A **very** common thickness is 1.6 mm (0.063") nominal with a tolerance of ±10%.

Rigid boards often appear green resulting from the use of a green soldermask to protect the outer copper traces from abrasion and corrosion. For those wanting boards with a different appearance, board manufacturers are now offering a variety of soldermask colors including red, white, yellow, blue, purple, black, and matte green.

Here is an image of a very common type of board, and one you will be designing, the four-layer rigid PCB -

<img src="../../Protoboard/Images/4-layer.png" width="500"/>

It is called a "FOUR LAYER BOARD" because it has four __copper__ layers (all the other stuff doesn't get counted).

<details>
  <summary>Just to be sure we're clear about this...</summary>
  
  FOR A "FOUR" LAYER BOARD WE NEED:
  
1. Top Silkscreen ---------------------------------------> (Gerber file)
1. Top Soldermask ---------------------------------------> (Gerber file)
1. Top Copper -------------------------------------------> (Gerber file)
1. Inner Layer #1 ---------------------------------------> (Gerber file)
1. Inner Layer #2 ---------------------------------------> (Gerber file)
1. Bottom Copper ----------------------------------------> (Gerber file)
1. Bottom Soldermask ------------------------------------> (Gerber file)
1. Bottom Silkscreen ------------------------------------> (Gerber file)
1. NC Drill file for Plated Through Holes (PTH) ---------> (Excellon file)
1. NC Drill file for Non-Plated Through Holes (NPTH) ----> (Excellon file)
1.  FAB Drawing (usually .pdf file) that specifies stackup, dimensions, tolerances, etc.

And *YOU'RE* going to make them all!! YAY!!

</details>

To really get a feel for this, it is helpful to see how rigid boards are fabricated.

* [Here is a video on the fabrication of rigid PCBs](https://www.youtube.com/watch?v=wmr-Sr-qd90&t=9s)

* [This is a video from one of the manufacturers you'll be using (PCBWay.com)](https://www.youtube.com/watch?v=o8NOK1JJbgw&t=104s)

* [A more complete look at 4-layer board fabrication](https://www.youtube.com/watch?v=sIV0icM_Ujo&t=394s)

__*Please let us know if you have any questions!*__

* __Flexible PCBs__ - Also known as *flex* or FPC boards, these are useful whenever things have to be folded up or move during operation.

The FPC substrate is almost always a type of polyimide material. The most common type goes by the tradename Kapton™ which is made by DuPont Chemical. Polyimide has remarkable material properties that make it nearly ideally suited as an FPC substrate. For example, polyimide does not melt, does not sustain a flame, is mechanically strong, has excellent dielectric properties, and so on. One aspect of polyimide that you may need to take into account is that it is an excellent thermal insulator. This means that heat generated by components will need to be carefully managed.

Typical FPC construction ranges from just one copper layer to as many as ten (10) layers. The finished thickness of flex boards ranges typically from ~ 0.08mm (0.003") to over 0.3 mm (0.012") with 0.1mm (~ 0.004") being a common thickness.

Due to material considerations, flex board colors are not so exciting; usually they are yellow, black, or white.

[Here is some interesting information on flex board stack-up](https://www.pcbway.com/pcb_prototype/Stack_up_for_FPC.html).


[How *flex* circuits are made](https://www.youtube.com/watch?v=C-2ysGoCRoo)


* __Metal Substrate PCBs__ - These have become very popular for LED lighting applications.

The heat generated by LED operation can be more easily managed using metal substrates. This can be readily understood with a quick look at their construction -

<img src="../../Protoboard/Images/MetalSubstrate.png" width="500"/>

Image courtesy of [PCBGoGo](https://www.pcbgogo.com)

In this construction the copper (top) layer tends to be thicker than in regular rigid PCBs with 2 oz. thickness being common. The dielectric (insulating) layer directly below the copper foil is designed to be thermally conductive and ranges in thickness from 50µm to 200µm (~ 0.002" to 0.008"). In LED lighting applications the dielectric layer can easily tolerate the relatively low voltages involved, so the aluminum subtrate is electrically isolated from the copper layer. The aluminum base layer has a high thermal conductivity tyically ranging from 1.0 to 2.0 W/(m∙K). This allows heat to "spread" throughout the metal substrate of the PCB. It should be noted that this DOES NOT mean that the heat will be dissapated via convective cooling and further provision, such as additional heat sinking, may be needed in high power applications.

## Discussion Questions 
**Why are we building boards in this workshop?**<br/>
We want to make more than one board, in a reliable manner. 

**Can boards have sharp edges?**<br/> 
Boards can have outside corners that are sharp, but inside edges cannot be perfectly sharp because of tool geometry. Therefore, remember to include a radius in the internal corners of your design. 

**Can you make just one PCB?**<br/> 
No, manufacturers make panels of multiple PCBs. 

**How many layers can a PCB have?**<br/>
You can have as many layers as you want to pay for, but the number of layers must be an even number (with the exception of one layer boards). 

**What is a core?**<br/>
The core is one of the fundamental building blocks of circuit boards. It’s composed of two copper layers with an insulating layer (prepreg) sandwiched in between.

**What is prepreg?**<br/> 
Prepreg is an insulating material placed between two copper layers in a core. 

**What is the role of foil? Why does it look like?**<br/>
The foil is the outer layer of the PCB. It has one shiny side, and one dull side. 

**Why are blind/buried vias more expensive?**<br/> 
A blind via is a hole that connects the outer layer to one of the inner layers, but does not go through the entire board. A buried via is a hole that connects inner layers but does not connect to an outer layer. Buried/blind vias are more expensive because they require more steps to make. Only use blind/buried vias after having confirmed with a manufacturer that the via is necessary for your application. 

**Can planes come out to the edges of the board?**<br/>
No, planes should be pulled back in from the edge of the board about ten thousandths of an inch to prevent the router from potentially shorting layers together. 

**If a drill size is specified in CAD files, will the holes in the board be that size?**<br/> 
The manufacturing company will drill the hole to the specified size, but the hole will get smaller during the plating process. Therefore, you should tell the manufacturing company what plating you want and what finished hole size you want. 

**Why is the annular ring ideas so important?**<br/> 
The annular ring represents a tolerance stack up. Because holes may not be drilled exactly where we intended them to, the hole and its corresponding pad may be too far from each other and cause a faulty circuit.  
![The Danger of Drilling!](https://www.protoexpress.com/blog/wp-content/uploads/2018/04/annular-ring-cross-section.png)  

<https://www.protoexpress.com/blog/dont-let-annular-rings-drive-you-crazy/>
